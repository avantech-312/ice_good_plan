# ТЗ: Создание приложения-аналога Ice Good Plan

## 1. Общее описание

Создать iOS-приложение по аналогии с Ice Good Plan (fishing logger), но с другой тематикой и отличиями в структуре. Базовая архитектура сохраняется: Flutter + Cupertino, онбординг, главный экран с табами, локальная БД Drift.

---

## 2. Варианты отличий (выбрать один или скомбинировать)

### Вариант A: Другая тематика
- **Охотник**: трофеи, места охоты, календарь сезонов, советы по экипировке.
- **Походы**: маршруты, снаряжение, ночёвки, погода/советы.
- **Сад/огород**: посадки, полив, урожай, напоминания.
- **Рецепты**: блюда, ингредиенты, категории, избранное.

### Вариант B: Другая цветовая схема
- Синий (текущий) → зелёный, тёмно-серый, оранжевый, фиолетовый.
- Сохранить контраст (светлый текст на тёмном фоне).

### Вариант C: Другая структура табов
- 3 таба вместо 4 (например, без Tips).
- 5 табов (добавить, например, «Настройки» или «Избранное»).
- Заменить один таб (например, Gear → «Календарь»).

### Вариант D: Дополнительный функционал
- Поиск/фильтр по спискам.
- Экспорт данных (CSV/JSON).
- Напоминания/уведомления.
- Фото к записям (опционально).

---

## 3. Технический стек (без изменений)

| Компонент | Технология |
|-----------|------------|
| UI | Flutter Cupertino |
| Язык | Dart |
| БД | Drift (SQLite) |
| Онбординг | shared_preferences |
| Графики | fl_chart |

---

## 4. Обязательные требования

1. **Онбординг** — 3 экрана, кнопки Skip / Next / Get Started, сохранение флага в shared_preferences.
2. **Главный экран** — CupertinoTabScaffold с 3–5 табами.
3. **Тема** — единый цвет фона на всех экранах, CupertinoThemeData.
4. **БД** — Drift, минимум 2 основные таблицы + опционально таблица под советы/справочник.
5. **Текст** — весь UI на английском.
6. **Без карты** — не использовать картографию.

---

## 5. Схема данных (пример для варианта «Походы»)

```
hikes: id, name, date, distance_km, notes, gear_id, created_at
gear:  id, name, type, brand, notes, created_at
tips:  id, title, body, category, created_at
```

Адаптировать поля под выбранную тематику.

---

## 6. Структура проекта

```
lib/
├── main.dart
├── app.dart
├── app_root.dart
├── database/
│   ├── app_database.dart
│   ├── database_provider.dart
│   └── app_database.g.dart
├── theme/
│   └── app_theme.dart
├── widgets/
│   └── scaffold_wrapper.dart   # обёртка с цветом фона
└── screens/
    ├── onboarding/
    ├── main_tabs/
    └── [экран1]/
    └── [экран2]/
    └── ...
```

---

## 7. Важные технические моменты (из опыта Ice Good Plan)

1. **DatabaseProvider** — должен оборачивать CupertinoApp (в `app.dart`), а не только MainTabsScreen, чтобы pushed-экраны видели провайдер.
2. **InheritedWidget в initState** — нельзя вызывать `DatabaseProvider.of(context)` в `initState`. Использовать `didChangeDependencies()` с флагом `_loadStarted` для единоразовой загрузки.
3. **Текст на кнопках** — на цветном фоне задавать явный белый/светлый цвет текста (`style: TextStyle(color: AppColors.textPrimary)`).
4. **Drift customSelect** — для полей, которые могут быть null, использовать `read<String?>('col') ?? fallback`.
5. **Пакет** — имя в pubspec.yaml в snake_case (например, `hike_logger`).

---

## 8. Чек-лист перед сдачей

- [ ] Онбординг показывается только при первом запуске
- [ ] Все экраны с единым цветом фона
- [ ] CRUD для основных сущностей
- [ ] Аналитика с графиками (если предусмотрена)
- [ ] Советы/подсказки (если предусмотрены)
- [ ] Текст на кнопках читаемый (контраст)
- [ ] Нет ошибок DatabaseProvider / initState
- [ ] flutter analyze без ошибок

---

## 9. Итоговый выбор параметров (заполнить перед стартом)

| Параметр | Значение |
|----------|----------|
| Название приложения | |
| Тематика | |
| Цветовая схема | |
| Количество табов | |
| Таблицы БД | |
| Особые отличия от Ice Good Plan | |
